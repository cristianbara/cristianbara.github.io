<!DOCTYPE html>
<html>

<head data-gwd-animation-mode="proMode">
    <meta name="GCD" content="YTk3ODQ3ZWZhN2I4NzZmMzBkNTEwYjJl779d54ebbc5e63e6c4b9471ccc141622" />
    <meta charset="utf-8">
    <title>video trainer</title>
    <meta name="generator" content="Google Web Designer 1.4.1.0901">
    <link href="styile.css" rel="stylesheet" type="text/css">
    <link href="gwdpage_style.css" data-version="8" data-exports-type="gwd-page" rel="stylesheet">
    <link href="gwdvideo_style.css" data-version="5" data-exports-type="gwd-video" rel="stylesheet">
    <link href="gwdimage_style.css" data-version="6" data-exports-type="gwd-image" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto|Passion+One" rel="stylesheet" type="text/css">
    <script data-source="googbase_min.js" data-version="3" data-exports-type="googbase" type="text/javascript" src="googbase_min.js"></script>
    <script data-source="gwd_webcomponents_min.js" data-version="4" data-exports-type="gwd_webcomponents" type="text/javascript" src="gwd_webcomponents_min.js"></script>
    <script data-source="gwdpage_min.js" data-version="8" data-exports-type="gwd-page" type="text/javascript" src="gwdpage_min.js"></script>
    <script data-source="gwdimage_min.js" data-version="6" data-exports-type="gwd-image" type="text/javascript" src="gwdimage_min.js"></script>
    <script data-source="gwdimagebutton_min.js" data-version="4" data-exports-type="gwd-imagebutton" type="text/javascript" src="gwdimagebutton_min.js"></script>
    <script data-source="gwdvideo_min.js" data-version="5" data-exports-type="gwd-video" type="text/javascript" src="gwdvideo_min.js"></script>

    <script type="text/javascript" src="jquery.js"></script>

</head>

<body>
    <div id="app" class="app-stretch">
        <div class="gwd-div-3eb5" id="header" style="">
            <div class="gwd-div-rdsn" id="h1" style="">VIDEO GYMNASTIEK</div>
            <div class="gwd-div-d8ml" id="h2">Welkom! Laten we verhuizen!</div>
        </div>
        <div class="gwd-div-19nn" id="body">
            <div class="gwd-imagebutton-1e5o" id="vt-we-recommend-wrap">
                <img id="vt-we-recommend" class="gwd-div-d5ad" src="1.jpg">
                <div class="gwd-div-17np" style="">Wij raden aan</div>
            </div>
            <div class="gwd-imagebutton-rlx2" id="vt-your-favorite-wrap">
                <img id="vt-your-favorite" src="2.jpg" class="gwd-div-d5ad">

                <div class="gwd-div-17np" style="">Je favoriet</div>
            </div>
            <div class="gwd-imagebutton-1mkg" id="vt-better-breathing-wrap">
                <img id="vt-better-breathing" src="3.jpg" class="gwd-div-d5ad">

                <div class="gwd-div-17np" style="">Betere ademhaling</div>
            </div>
            <div class="gwd-imagebutton-j5wk" id="vt-better-strength-wrap">
                <img id="vt-better-strength" src="4.jpg" class="gwd-div-d5ad">

                <div class="gwd-div-17np" style="">Betere sterkte</div>
            </div>
        </div>
        <div class="gwd-div-e0dw" id="footer"></div>

        <div class="gwd-div-7tg3" id="routine" style="">
            <!-- <img src="preloader.gif" class="gwd-img-htup" id="preloader"> -->

            <!-- video:1 -->
            <div class="gwd-div-suk4" id="video1">
                <video id="gwd-video_1" webkit-playsinline controls class="gwd-video-18oz">
                    <source id="video-source" type="video/mp4">
                    <!-- src="video2.mp4" -->
                </video>

                <!-- Video Controls -->
                <div id="play-pause-btn" style="position: absolute; width: 60px; height: 60px; border-radius: 15px; width: 80px; height: 80px; border: 2px solid #f26363; left: 89%; top: 80%; text-align: center; font-size: 50px; background: white; box-shadow: 0 3px 6px rgba(0, 0, 0, 0.16), 0 3px 6px rgba(0, 0, 0, 0.23);">
                    <img src="pause.png" style="width: 100%; height: 100%">
                </div>
                <input type="range" id="volume-btn" min="0" max="100" value="100" style="position: absolute; left: 83%; top: 57%; transform: rotate(-90deg); border: 2px solid lightgray; border-radius: 15px;">

            </div>

            <!-- rest:1 -->
            <div class="gwd-div-suk4 rest" id="rest1">
                <div class="gwd-div-1w5r" style="">Rusttijd
                    <br> <span style="font-size: 120px; text-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);" id="timer1"></span>
                </div>
                <div class="gwd-div-6lr1 enjoy-rating" id="">Hoeveel heb je genoten van deze oefening?
                    <br>
                    <span class="rating-btn" data-star-count="1.0"> ★ </span>
                    <span class="rating-btn" data-star-count="2.0"> ★ </span>
                    <span class="rating-btn" data-star-count="3.0"> ★ </span>
                    <span class="rating-btn" data-star-count="4.0"> ★ </span>
                    <span class="rating-btn" data-star-count="5.0"> ★ </span>
                </div>
                <div class="gwd-div-6lr1 difficulty-rating" id="">Hoe moeilijk was deze oefening?
                    <br>
                    <span class="rating-btn" data-star-count="1.0"> ☗ </span>
                    <span class="rating-btn" data-star-count="2.0"> ☗ </span>
                    <span class="rating-btn" data-star-count="3.0"> ☗ </span>
                    <span class="rating-btn" data-star-count="4.0"> ☗ </span>
                    <span class="rating-btn" data-star-count="5.0"> ☗ </span>
                </div>
            </div>

            <!-- end:1 -->
            <div class="gwd-div-suk4" id="end">
                <div class="gwd-div-1w5r" id="timer" style="">Einde van Routine
                    <br>
                    <span style="font-size: 120px;">Klaar</span>
                    <span style="font-size: 120px; color: green;"> ♕ </span>
                </div>
                <div class="gwd-div-6lr1 enjoy-rutine-rating" id="">Hoeveel heb je genoten van deze oefening?
                    <br>
                    <span class="rating-btn" data-star-count="1.0"> ★ </span>
                    <span class="rating-btn" data-star-count="2.0"> ★ </span>
                    <span class="rating-btn" data-star-count="3.0"> ★ </span>
                    <span class="rating-btn" data-star-count="4.0"> ★ </span>
                    <span class="rating-btn" data-star-count="5.0"> ★ </span>
                </div>
                <div class="gwd-div-6lr1 difficulty-rutine-rating" id="">Hoe moeilijk was deze oefening?
                    <br>
                    <span class="rating-btn" data-star-count="1.0"> ☗ </span>
                    <span class="rating-btn" data-star-count="2.0"> ☗ </span>
                    <span class="rating-btn" data-star-count="3.0"> ☗ </span>
                    <span class="rating-btn" data-star-count="4.0"> ☗ </span>
                    <span class="rating-btn" data-star-count="5.0"> ☗ </span>
                </div>


                <div class="gwd-div-1gbj close" style="left:50%; margin-left:-30px; top: 90%;" id="prev-7">Stoppen</div>

            </div>

            <div class="gwd-div-1u47 close" id="close">X</div>
        </div>

    </div>

    <script>
        var videoSet = [];
        var videoIndex = -1;
        var quitTraining;
        var thisSessionID = "";
        var enjoy_count = -1;
        var dificulty_count = -1;

        function generateUUID() {
            var d = new Date().getTime();
            var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                var r = (d + Math.random() * 16) % 16 | 0;
                d = Math.floor(d / 16);
                return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);
            });
            return uuid;
        };

        function startTimer(elementId, time) {
            var currentTimeCount = time;
            $(elementId).html(currentTimeCount + " sec.");
            var timer = setInterval(function () {
                currentTimeCount--;
                $(elementId).html(currentTimeCount + " sec.");
                console.log("timer - quitTraining:" + quitTraining);

                if (quitTraining == false) {
                    if (currentTimeCount == 0) {

                        // save rastings to reasoner.
                        // send enjoyment feedback to PARS
                        $.ajax({
                            url: 'https://myhealthframe.nl/ParsWebService/services/pars',
                            data: JSON.stringify({
                                jsonrpc: '2.0',
                                method: 'saveRating',
                                params: [thisSessionID, 'Alex', 2, videoSet[videoIndex - 1].exerciseId, parseFloat(enjoy_count)],
                                id: "jsonrpc"
                            }), // id is needed !!
                            type: "POST",
                            dataType: "json",
                            success: function () {

                                var rating = {
                                    visitId: thisSessionID,
                                    userId: 'Alex',
                                    rateType: 2,
                                    exerciseId: videoSet[videoIndex - 1].exerciseId,
                                    rating: parseFloat(enjoy_count),
                                    forVideoIndex: videoIndex - 1,
                                }

                                console.log('sent feedback:');
                                console.log(rating);
                                enjoy_count = -1;


                            },
                            error: function (err) {
                                alert("ERROR: The system is not functioning. Please try again later.");
                            }

                        });

                        // send enjoyment feedback to PARS
                        $.ajax({
                            url: 'https://myhealthframe.nl/ParsWebService/services/pars',
                            data: JSON.stringify({
                                jsonrpc: '2.0',
                                method: 'saveRating',
                                params: [thisSessionID, 'Alex', 1, videoSet[videoIndex - 1].exerciseId, parseFloat(dificulty_count)],
                                id: "jsonrpc"
                            }), // id is needed !!
                            type: "POST",
                            dataType: "json",
                            success: function () {

                                var rating = {
                                    visitId: thisSessionID,
                                    userId: 'Alex',
                                    rateType: 1,
                                    exerciseId: videoSet[videoIndex - 1].exerciseId,
                                    rating: parseFloat(dificulty_count)
                                }
                                console.log('sent feedback:');
                                console.log(rating);


                            },
                            error: function (err) {
                                alert("ERROR: The system is not functioning. Please try again later.");
                            }

                        });



                        // show next video [todo]
                        setVideo(videoIndex, videoSet.length);

                        console.log('videoIndex: ' + videoIndex);
                        // set source for the first video, only after a successful ajax response
                        setTimeout(function () {

                            clearRatings();

                        }, 100);

                        clearInterval(timer);

                    }
                } else {
                    clearInterval(timer);
                }
            }, 1000);
        };

        function getVideoSet() {
            thisSessionID = generateUUID();

            $.ajax({
                url: 'https://myhealthframe.nl/ParsWebService/services/pars',
                data: JSON.stringify({
                    jsonrpc: '2.0',
                    method: 'getRecommendedExercises',
                    params: [, 'Alex'],
                    id: "jsonrpc"
                }), // id is needed !!
                type: "POST",
                dataType: "json",
                success: function (data) {
                    // get the new rutine
                    videoSet = data.result;
                    console.log(videoSet);
                    // reset the video index
                    videoIndex = 0;
                    setVideo(videoIndex, videoSet.length);

                    // start playout
                    $('#routine').fadeIn();
                    // set source for the first video, only after a successful ajax response
                    setTimeout(function () {
                        $('#video1').fadeIn(function () {
                            $(this).trigger("fadeInComplete");
                        });
                    }, 100);
                },
                error: function (err) {
                    alert("ERROR: The system is not functioning. Please try again later.");
                }

            });
        };

        function setVideo(index, length) {
            if (index == length - 1) {
                $('#video1').hide();
                $('#rest1').hide();
                $('#end').fadeIn();
            } else {
                $('#video-source').attr('src', videoSet[index].videoURL);
                $('#gwd-video_1')[0].load();
                console.log('setting video: ' + videoSet[index].videoURL);
            };

            enjoy_count = -1;
            dificulty_count = -1;
            videoIndex++;
        };

        function clearRatings() {
            var clear = {
                color: 'dimgray'
            };

            $('.enjoy-rating > span').css(clear);
            // $('.enjoy-rating > span').html(' ☆ ');

            $('.difficulty-rating > span').css(clear);
            // $('.difficulty-rating > span').html(' ☖ ');

        }

        $(document).ready(function () {
        /*setTimeout(function() {
            $('#splashscreen').hide();
        }, 1500);*/

        // hide routine panel
        $('#routine').hide();


        $('#video1').on('fadeInComplete', function () {
            //alert("I should play");
            // setVideo(videoIndex);             

            $(this).children('video').get(0).currentTime = 0;
            $(this).children('video').get(0).play(0);
        })



        // add main vt buttons click events handlers
        $('#vt-we-recommend-wrap').on('click', function () {

            getVideoSet();

            quitTraining = false;
            console.log("we recommend - quitTraining:" + quitTraining);

            $('#video1').hide();
            $('#rest1').hide();
            $('#end').hide();

        });

        // add main vt buttons click events handlers
        $('#vt-your-favorite-wrap').on('click', function () {

            getVideoSet();

            quitTraining = false;

            $('#video1').hide();
            $('#rest1').hide();
            $('#end').hide();

        });

        // add main vt buttons click events handlers
        $('#vt-better-breathing-wrap').on('click', function () {

            getVideoSet();

            quitTraining = false;

            $('#video1').hide();
            $('#rest1').hide();
            $('#end').hide();


        });

        // add main vt buttons click events handlers
        $('#vt-better-strength-wrap').on('click', function () {

            getVideoSet();

            quitTraining = false;

            $('#video1').hide();
            $('#rest1').hide();
            $('#end').hide();

        });



        // ratings click/tap ui events handlers
        $('.enjoy-rating > span').on('click', function () {
            //alert('Zing!');
            var selected = {
                color: 'orange'
            };
            var not_selected = {
                color: 'dimgray'
            };

            enjoy_count = 0;
            enjoy_count = $(this).data('star-count');


            $(this).prevAll().css(selected);
            $(this).css(selected);
            $(this).nextAll().css(not_selected);



        });

        $('.difficulty-rating > span').on('click', function () {
            //alert('Zing!');
            var selected = {
                color: '#59506F'
            };
            var not_selected = {
                color: 'dimgray'
            };

            dificulty_count = 0;
            dificulty_count = $(this).data('star-count');

            $(this).prevAll().css(selected);
            $(this).css(selected);
            $(this).nextAll().css(not_selected);


        });

        $('.difficulty-rutine-rating > span').on('click', function () {
            //alert('Zing!');
            var selected = {
                color: '#59506F'
            };
            var not_selected = {
                color: 'black'
            };

            $(this).prevAll().css(selected).html(' ☗ ');
            $(this).css(selected).html(' ☗ ');
            $(this).nextAll().css(not_selected).html(' ☖ ');


        });

        $('.enjoy-rutine-rating > span').on('click', function () {
            //alert('Zing!');
            var selected = {
                color: 'orange'
            };
            var not_selected = {
                color: 'black'
            };

            $(this).prevAll().css(selected).html(' ★ ');
            $(this).css(selected).html(' ★ ');
            $(this).nextAll().css(not_selected).html(' ☆ ');


        });

        $('.close').on('click', function () {
            // stop video play, if any
            // stopVideo();

            quitTraining = true;
            console.log("close btn - quitTraining:" + quitTraining);

            // pause all videos
            $('#routine').find('#gwd-video_1').get(0).pause();

            // hide routine panel
            $('#routine').hide();

        });

        $('video').on('ended', function () {
            // when the video ends, show the rest screen
            $('#video1').children('video').get(0).pause();
            $('#video1').hide();

            $('#rest1').fadeIn();

            if (videoIndex < 4 || videoIndex > videoSet.length - 4) {
                // hide ratings
                $('.enjoy-rating').hide();
                $('.difficulty-rating').hide();

            } else {
                //show ratings
                $('.enjoy-rating').show();
                $('.difficulty-rating').show();
            }
            // startTimer('#timer1', Math.abs(videoSet[videoIndex-1].setCount) * Math.abs(videoSet[videoIndex-1].repetitionCount) * 10);
            startTimer('#timer1', 20);
        });



        /* $('video').bind('loadeddata', function () {
             alert('Loaded video');
             setTimeout(function () {
                     $('#video1').fadeIn(function () {
                         $(this).trigger("fadeInComplete");
                     });
                 }, 100);
             }, false);
             */

        var video = document.getElementById('gwd-video_1');
        video.addEventListener('loadeddata', function () {
            // Video is loaded and can be played
            // alert('Loaded video');
            setTimeout(function () {
                $('#video1').fadeIn(function () {
                    $(this).trigger("fadeInComplete");
                });
            }, 100);
        }, false);

        $('#play-pause-btn').click(function () {
            var currentVideo = document.getElementById('gwd-video_1');
            if (currentVideo.paused || currentVideo.ended) {
                $(this).html('<img src="pause.png" style="width: 100%; height: 100%">'); // add propper icons for play and pause.

                currentVideo.play();
            } else {
                $(this).html('<img src="play.png" style="width: 100%; height: 100%">');

                currentVideo.pause();
            }
        });

        $('#volume-btn').change(function () {
            newvolume = $('#volume-btn').val() / 100;
            console.log(newvolume);
            $('#gwd-video_1')[0].volume = newvolume;
            //console.log($('#video').attr("volume"));
        });
       

        });
    </script>

</body>

</html>